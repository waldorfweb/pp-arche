(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{332:function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("form",{staticClass:"reset-pwd-container login-pwd-reset",attrs:{id:"reset-pwd-form-"+t._uid,method:"post"}},[a("div",{ref:"pwdModal",staticClass:"modal fade",attrs:{id:"resetPwd",tabindex:"-1",role:"dialog"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[a("div",{staticClass:"modal-header"},[a("div",{staticClass:"modal-title h3"},[t._v(t._s(t.$translate("Ceres::Template.loginForgotPassword")))]),t._v(" "),a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-hidden":"true"}},[t._v("Ã—")])]),t._v(" "),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"alert alert-info w-100 pwd-forgot-info"},[a("span",{staticClass:"info-badge"},[t._v(t._s(t.$translate("Ceres::Template.loginForgotPasswordInfo")))])]),t._v(" "),a("div",{staticClass:"row"},[a("div",{staticClass:"col-12"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.honeypot,expression:"honeypot"}],staticClass:"honey",attrs:{type:"text",name:"username",autocomplete:"off",tabindex:"-1"},domProps:{value:t.honeypot},on:{input:function(e){e.target.composing||(t.honeypot=e.target.value)}}}),t._v(" "),a("div",{staticClass:"input-unit no-bottom",attrs:{"data-validate":"mail"}},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{type:"email",name:"email",autocomplete:"email",id:"mail"+t._uid,"data-autofocus":""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),a("label",{attrs:{for:"mail"+t._uid}},[t._v(t._s(t.$translate("Ceres::Template.loginEmail"))+"*")])]),t._v(" "),a("span",{staticClass:"error-msg"},[t._v(t._s(t.$translate("Ceres::Template.loginEnterConfirmEmail")))])])])]),t._v(" "),a("div",{staticClass:"modal-footer"},[a("div",[t._t("extend-overlay-buttons"),t._v(" "),t.currentTemplate&&"tpl.login"!=t.currentTemplate?a("button",{staticClass:"btn btn-danger btn-medium mr-2",attrs:{type:"button"},on:{click:function(e){return e.preventDefault(),t.cancelResetPwd(e)}}},[a("i",{staticClass:"fa fa-arrow-left",attrs:{"aria-hidden":"true"}}),t._v("\n                                "+t._s(t.$translate("Ceres::Template.loginBackToLogin"))+"\n                            ")]):t._e(),t._v(" "),a("button",{staticClass:"btn btn-primary btn-medium",attrs:{disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.validateResetPwd(e)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(t.$translate("Ceres::Template.loginSend"))+"\n\t\t\t\t\t\t\t\t"),a("icon",{attrs:{icon:"paper-plane-o",loading:t.isDisabled}})],1)],2)])])])])])};s._withStripped=!0;var o=a(3),i=a(6),l=a(46),r=a(15),n=a(10),d=a(1),m={name:"forgot-password-modal",props:{currentTemplate:String},data:()=>({username:"",isDisabled:!1,honeypot:""}),mounted(){this.$nextTick(()=>{$(this.$refs.pwdModal).on("hidden.bs.modal",()=>{this.username=""});const t=n.a.getUrlParams(document.location.search);Object(d.d)(t.show)||"forgotPassword"!==t.show||(l.default.findModal(this.$refs.pwdModal).show(),this.username=Object(d.d)(t.email)?"":t.email)})},watch:{username(t,e){this.resetError()}},methods:{validateResetPwd(){r.default.validate(this.$refs.pwdModal).done(()=>{this.sendResetPwd()}).fail(t=>{r.default.markInvalidFields(t,"error")})},sendResetPwd(){this.isDisabled=!0,o.default.post("/rest/io/customer/password_reset",{email:this.username,honeypot:this.honeypot}).done(()=>{l.default.findModal(this.$refs.pwdModal).hide(),this.isDisabled=!1,i.default.success(this.$translate("Ceres::Template.loginSendEmailOk")).closeAfter(5e3)}).fail(()=>{this.isDisabled=!1,i.default.error(this.$translate("Ceres::Template.loginResetPwDErrorOnSendEmail")).closeAfter(5e3)})},cancelResetPwd(){this.resetError(),l.default.findModal(this.$refs.pwdModal).hide().then(()=>{l.default.findModal(document.getElementById("login")).show()})},resetError(){r.default.unmarkAllFields(this.$refs.pwdModal)}}},u=a(4),c=Object(u.a)(m,s,[],!1,null,null,null);c.options.__file="node_modules/Ceres/resources/js/src/app/components/customer/login/ForgotPassword.vue";e.default=c.exports}}]);
//# sourceMappingURL=ceres-24.min.js.map