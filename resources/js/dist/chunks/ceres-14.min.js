(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{297:function(e,t,i){"use strict";var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return e.label.length||"bundle"===e.bundleType||"set"===e.itemType?i("div",{staticClass:"special-tags p-2"},[e.label.length?i("span",{staticClass:"badge",class:e.tagClass},[e._v("\n        "+e._s(e.label)+"\n    ")]):"bundle"===e.bundleType?i("span",{class:e.tagClasses.itemBundle},[e._v("\n        "+e._s(e.$translate("Ceres::Template.itemBundle"))+"\n    ")]):"set"===e.itemType?i("span",{class:e.tagClasses.itemSet},[e._v("\n        "+e._s(e.$translate("Ceres::Template.itemSet"))+"\n    ")]):e._e()]):e._e()};s._withStripped=!0;var a=i(1),r={name:"item-store-special",props:["storeSpecial","recommendedRetailPrice","variationRetailPrice","specialOfferPrice","decimalCount","bundleType","itemType"],data(){return{tagClass:"",label:"",tagClasses:{1:"badge-offer badge-danger",2:"badge-new badge-primary",3:"badge-top badge-success",default:"badge-success",itemBundle:"badge badge-bundle bg-info",itemSet:"badge badge-dark"},labels:{1:this.$translate("Ceres::Template.storeSpecialOffer"),2:this.$translate("Ceres::Template.storeSpecialNew"),3:this.$translate("Ceres::Template.storeSpecialTop")}}},created(){this.initializeStoreSpecial()},methods:{initializeStoreSpecial(){Object(a.d)(this.storeSpecial)?this.tagClass=this.tagClasses.default:this.tagClass=this.tagClasses[this.storeSpecial.id]||this.tagClasses.default,this.label=this.getLabel()},getLabel(){return Object(a.d)(this.storeSpecial)||1!==this.storeSpecial.id||Object(a.d)(this.recommendedRetailPrice)?Object(a.d)(this.storeSpecial)?"":this.labels[this.storeSpecial.id]||this.storeSpecial.names.name:this.getPercentageSale()},getPercentageSale(){let e;return e=Object(a.b)(this.specialOfferPrice)?-100*(1-this.specialOfferPrice.unitPrice.value/this.variationRetailPrice.unitPrice.value):-100*(1-this.variationRetailPrice.unitPrice.value/this.recommendedRetailPrice.unitPrice.value),e<0?e.toFixed(this.decimalCount).replace(".",App.decimalSeparator)+"%":""}},watch:{storeSpecial(){this.initializeStoreSpecial()}}},n=i(4),l=Object(n.a)(r,s,[],!1,null,null,null);l.options.__file="node_modules/Ceres/resources/js/src/app/components/itemList/ItemStoreSpecial.vue";t.a=l.exports},320:function(e,t,i){"use strict";i.r(t);var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[e.currentOffer?i("category-item",{attrs:{"item-data":e.currentOffer.item,"decimal-count":e.$ceres.config.item.storeSpecial,"image-url-accessor":"urlMiddle","padding-classes":e.paddingClasses,"padding-inline-styles":e.paddingInlineStyles},scopedSlots:e._u([{key:"store-special",fn:function(){return[e.storeSpecial?i("item-store-special",{attrs:{"store-special":e.storeSpecial,"recommended-retail-price":e.prices.rrp,"variation-retail-price":e.prices.price,"decimal-count":e.$ceres.config.item.storeSpecial}}):e._e()]},proxy:!0},{key:"item-image",fn:function(){return[e.displaySettings.customImagePath?i("a",{attrs:{href:e._f("itemURL")(e.currentOffer.item)}},[i("lazy-img",{attrs:{"image-url":e.displaySettings.customImagePath,alt:e._f("itemName")(e.currentOffer.item),title:e._f("itemName")(e.currentOffer.item)}})],1):e._e()]},proxy:!0},e.currentOffer&&1!==e.whenIsCurrentOffer()&&e.isActiveByStock?{key:"item-details",fn:function(){return[i("live-shopping-details",{attrs:{"live-shopping-data":e.currentOffer,"display-settings":e.displaySettings,prices:e.prices,"is-active-by-stock":e.isActiveByStock,"show-net-prices":e.showNetPrices},on:{"reload-offer":function(t){return e.reloadOffer()}},scopedSlots:e._u([{key:"after-item-name",fn:function(){return[i("div",{staticClass:"live-shopping-add-to-basket"},[i("add-to-basket",{attrs:{"variation-id":e.currentOffer.item.variation.id,"is-salable":!!e.currentOffer.item.filter&&e.currentOffer.item.filter.isSalable,"has-children":!!e.currentOffer.item.filter&&e.currentOffer.item.filter.hasActiveChildren,"interval-quantity":e.currentOffer.item.variation.intervalOrderQuantity||1,"minimum-quantity":e.currentOffer.item.variation.minimumOrderQuantity,"maximum-quantity":e.currentOffer.item.variation.maximumOrderQuantity&&e.currentOffer.item.variation.maximumOrderQuantity>0?e.currentOffer.item.variation.maximumOrderQuantity:null,"order-properties":e.currentOffer.item.properties.filter((function(e){return e.property.isOderProperty})),"has-order-properties":e.currentOffer.item.hasOrderProperties,"use-large-scale":!1,"show-quantity":!1,"item-url":e._f("itemURL")(e.currentOffer.item),"item-type":e.currentOffer.item.item.itemType}})],1)]},proxy:!0}],null,!1,741665433)})]},proxy:!0}:null],null,!0)}):i("div",[e._t("default")],2)],1)};s._withStripped=!0;var a=i(5),r=i(1),n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"live-shopping-details"},[i("div",{staticClass:"h3 live-shopping-item-name"},[i("a",{attrs:{href:e._f("itemURL")(e.liveShoppingData.item)}},[e._v("\n            "+e._s(e._f("itemName")(e.liveShoppingData.item))+"\n        ")])]),e._v(" "),e._t("after-item-name"),e._v(" "),e.displaySettings.showTimer||e.displaySettings.showStock?i("div",{staticClass:"live-shopping-countdown"},[i("hr",{staticClass:"live-shopping-countdown-separator"}),e._v(" "),e.displaySettings.showTimer?i("div",{staticClass:"live-shopping-countdown-heading"},[e.hasStarted?i("div",[e._v("\n                "+e._s(e.$translate("Ceres::Template.liveShoppingOfferEndsIn"))+"\n            ")]):i("div",[e._v("\n                "+e._s(e.$translate("Ceres::Template.liveShoppingOfferBeginsIn"))+"\n            ")])]):e._e(),e._v(" "),e.displaySettings.showTimer&&e.duration?i("div",{staticClass:"live-shopping-countdown-thread-container"},[e.duration.days>0?i("div",{staticClass:"live-shopping-countdown-thread"},[i("div",{staticClass:"live-shopping-countdown-thread-number"},[e._v(e._s(e.duration.days))]),e._v(" "),i("div",{staticClass:"small"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingDays")))])]):e._e(),e._v(" "),i("div",{staticClass:"live-shopping-countdown-thread"},[i("div",{staticClass:"live-shopping-countdown-thread-number"},[e._v(e._s(e.duration.hours))]),e._v(" "),i("div",{staticClass:"small"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingHours")))])]),e._v(" "),i("div",{staticClass:"live-shopping-countdown-thread"},[i("div",{staticClass:"live-shopping-countdown-thread-number"},[e._v(e._s(e.duration.minutes))]),e._v(" "),i("div",{staticClass:"small"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingMinutes")))])]),e._v(" "),e.duration.days<=0?i("div",{staticClass:"live-shopping-countdown-thread"},[i("div",{staticClass:"live-shopping-countdown-thread-number"},[e._v(e._s(e.duration.seconds))]),e._v(" "),i("div",{staticClass:"small"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingSeconds")))])]):e._e()]):e._e(),e._v(" "),e.hasStarted&&!e.hasClosed?[e.displaySettings.showTimer&&e.displaySettings.showTimerProgress?i("div",{staticClass:"live-shopping-progress"},[i("div",{staticClass:"progress"},[i("div",{staticClass:"progress-bar",class:"progress-"+10*Math.round(e.timePercentage/10),style:"width:"+e.timePercentage+"%",attrs:{role:"progressbar","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"}})])]):e._e(),e._v(" "),e.displaySettings.showStock?i("div",{staticClass:"live-shopping-progress"},[i("div",{staticClass:"live-shopping-progress-heading"},[i("span",[e._v(e._s(e.$translate("Ceres::Template.liveShoppingRemainingStock",{quantityRemaining:e.itemQuantityRemaining,quantityMax:e.liveShoppingData.liveShopping.quantityMax})))])]),e._v(" "),e.displaySettings.showStockProgress?i("div",{staticClass:"progress"},[i("div",{staticClass:"progress-bar",class:"progress-"+10*Math.round(e.quantitySoldPercentage/10),style:"width:"+e.quantitySoldPercentage+"%",attrs:{role:"progressbar","aria-valuenow":"25","aria-valuemin":"0","aria-valuemax":"100"}})]):e._e()]):e._e()]:e._e()],2):e._e(),e._v(" "),e.hasStarted&&!e.hasClosed?i("div",{staticClass:"live-shopping-prices bg-danger"},[i("div",{staticClass:"live-shopping-prices-inner"},[!isNaN(e.itemPriceRebatePercentage)&&e.itemPriceRebatePercentage>0?i("div",{staticClass:"live-shopping-prices-rebate"},[e._v(e._s(e.$translate("Ceres::Template.liveShoppingRebate",{rebate:e.itemPriceRebatePercentage})))]):e._e(),e._v(" "),i("div",{staticClass:"live-shopping-prices-container"},[i("div",{staticClass:"live-shopping-price"},[i("strong",[e._v(e._s(e.prices.price.unitPrice.formatted)+" *")])]),e._v(" "),e.displaySettings.showCrossPrice&&e.prices.rrp&&e.prices.rrp.unitPrice.value>0?i("span",[e.prices.isRrpDefaultPrice?i("span",{domProps:{innerHTML:e._s(e.oldPriceBefore)}}):i("span",{domProps:{innerHTML:e._s(e.oldPriceRrp)}})]):e._e()])]),e._v(" "),i("div",{staticClass:"live-shopping-prices-additional-info"},["C62"!==e.liveShoppingData.item.unit.unitOfMeasurement||1!==e.liveShoppingData.item.unit.content?i("div",[i("span",[e._v(e._s(e.liveShoppingData.item.unit.content))]),e._v(" "),i("span",[e._v(e._s(e.liveShoppingData.item.unit.names.name))]),e._v(" "),e.liveShoppingData.item.variation.mayShowUnitPrice?i("span",[e._v("| "+e._s(e.prices.price.basePrice))]):e._e()]):e._e(),e._v("\n\n            * "),e.showNetPrices?[e._v(e._s(e.$translate("Ceres::Template.itemExclVAT")))]:[e._v(e._s(e.$translate("Ceres::Template.itemInclVAT")))],e._v(" "+e._s(e.$translate("Ceres::Template.itemExclusive"))+"\n            "),e.$ceres.config.global.shippingCostsCategoryId>0?i("a",{attrs:{"data-toggle":"modal",href:"#shippingscosts",title:e.$translate("Ceres::Template.itemShippingCosts")}},[e._v(e._s(e.$translate("Ceres::Template.itemShippingCosts")))]):i("a",{attrs:{title:e.$translate("Ceres::Template.itemShippingCosts")}},[e._v(e._s(e.$translate("Ceres::Template.itemShippingCosts")))])],2)]):i("div",{staticClass:"thumb-content"},[i("div",[i("div",{staticClass:"prices"},[i("div",{staticClass:"price-view-port"},[e.displaySettings.showCrossPrice&&e.prices.rrp.price.value>0?i("del",{staticClass:"crossprice"},[e._v("\n                        "+e._s(e._f("itemCrossPrice")(e.prices.rrp.price.formatted))+"\n                    ")]):e._e()]),e._v(" "),i("div",{staticClass:"price"},[e._v("\n                    "+e._s(e.prices.price.price.formatted)+" *\n                ")])]),e._v(" "),"C62"!==e.liveShoppingData.item.unit.unitOfMeasurement||1!==e.liveShoppingData.item.unit.content?i("div",{staticClass:"category-unit-price small"},[i("span",[e._v(e._s(e.liveShoppingData.item.unit.content))]),e._v(" "),i("span",[e._v(e._s(e.liveShoppingData.item.unit.names.name))]),e._v(" "),e.liveShoppingData.item.variation.mayShowUnitPrice?i("span",[e._v("| "+e._s(e.prices.price.basePrice))]):e._e()]):e._e(),e._v(" "),i("span",{staticClass:"vat small text-muted"},[e._v("\n                * "),e.showNetPrices?[e._v(e._s(e.$translate("Ceres::Template.itemExclVAT")))]:[e._v(e._s(e.$translate("Ceres::Template.itemInclVAT")))],e._v(" "+e._s(e.$translate("Ceres::Template.itemExclusive"))+"\n                "),e.$ceres.config.global.shippingCostsCategoryId>0?i("a",{attrs:{"data-toggle":"modal",href:"#shippingscosts",title:e.$translate("Ceres::Template.itemShippingCosts")}},[e._v(e._s(e.$translate("Ceres::Template.itemShippingCosts")))]):i("a",{attrs:{title:e.$translate("Ceres::Template.itemShippingCosts")}},[e._v(e._s(e.$translate("Ceres::Template.itemShippingCosts")))])],2)])])],2)};n._withStripped=!0;var l=i(46),p=i.n(l),o={props:{liveShoppingData:{type:Object,required:!0},displaySettings:{type:Object,default:()=>({showCrossPrice:!0,showStock:!0,showStockProgress:!0,showTimer:!0,showTimerProgress:!0})},prices:{type:Object,required:!0},isActiveByStock:{type:Boolean},showNetPrices:{type:Boolean}},data:()=>({currentInterval:null,duration:null,hasClosed:null,hasStarted:null,itemPriceRebatePercentage:0,itemQuantityRemaining:0,momentBegin:null,momentEnd:null,quantitySoldPercentage:0,timePercentage:0}),computed:{oldPriceBefore(){return this.$translate("Ceres::Template.liveShoppingBefore",{price:"<del>"+this.prices.rrp.unitPrice.formatted+"</del>"})},oldPriceRrp(){return this.$translate("Ceres::Template.liveShoppingRrp",{price:"<del>"+this.prices.rrp.unitPrice.formatted+"</del>"})}},created(){this.initializeDataAndTimer()},methods:{initializeDataAndTimer(){const e=p()();this.momentBegin=p.a.unix(this.liveShoppingData.liveShopping.fromTime),this.momentEnd=p.a.unix(this.liveShoppingData.liveShopping.toTime),this.hasStarted=this.momentBegin.valueOf()<e.valueOf(),this.hasClosed=this.momentEnd.valueOf()<e.valueOf(),this.setQuantitySoldPercentage(),this.hasStarted&&!this.hasClosed&&this.setItemPriceRebatePercentage(),clearInterval(this.currentInterval),this.calculations(),this.currentInterval=setInterval(()=>{this.calculations()},1e3)},setQuantitySoldPercentage(){const e=this.liveShoppingData.liveShopping,t=100-e.quantitySold/e.quantityMax*100;this.itemQuantityRemaining=e.quantityMax-e.quantitySold,this.quantitySoldPercentage=t.toFixed(App.config.item.storeSpecial)},setItemPriceRebatePercentage(){const e=this.prices.price.price.value,t=this.prices.rrp&&this.prices.rrp.price.value||0;if(0===t)this.itemPriceRebatePercentage=0;else{let i=100-e/t*100;i=i.toFixed(App.config.item.storeSpecial),i=i.replace(".",App.decimalSeparator),this.itemPriceRebatePercentage=i}},calculations(){const e=p()();let t=0,i=0;t=this.momentEnd.diff(this.momentBegin,"second"),i=this.hasStarted?this.momentEnd.diff(e,"second"):this.momentBegin.diff(e,"second"),this.timePercentage=(i/t*100).toFixed(App.config.item.storeSpecial),this.duration=this.getDuration(i);const s=!this.hasStarted&&this.momentBegin<e,a=!this.hasClosed&&this.momentEnd<e;(s||a)&&(clearInterval(this.currentInterval),this.$emit("reload-offer"))},getDuration(e){const t=Math.floor(e/86400);e-=60*t*60*24;const i=Math.floor(e/3600);e-=60*i*60;const s=Math.floor(e/60);return{days:t,hours:i,minutes:s,seconds:e-=60*s}}},watch:{liveShoppingData(){this.initializeDataAndTimer()}}},c=i(4),d=Object(c.a)(o,n,[],!1,null,null,null);d.options.__file="node_modules/Ceres/resources/js/src/app/components/liveShopping/LiveShoppingDetails.vue";var m=d.exports,h=i(297);const u=Object.freeze({past:1,now:2,future:3});var v={components:{LiveShoppingDetails:m,ItemStoreSpecial:h.a},props:{liveShoppingId:{type:Number,required:!0,validator:e=>e%1==0&&e>=1&&e<=10},displaySettings:{type:Object},paddingClasses:{type:String,default:null},paddingInlineStyles:{type:String,default:null},sorting:{type:String,default:null},showNetPrices:{type:Boolean}},computed:{currentOffer(){return this.liveShoppingOffers[this.liveShoppingId]},isActive(){return this.isActiveByTime&&this.isActiveByStock},isActiveByTime(){if(!Object(r.d)(this.currentOffer)){const e=1e3*parseInt(this.currentOffer.liveShopping.fromTime),t=1e3*parseInt(this.currentOffer.liveShopping.toTime),i=Date.now();return e<i&&i<t}return!1},isActiveByStock(){if(!Object(r.d)(this.currentOffer)){const e=this.currentOffer.liveShopping;return e.quantitySold<e.quantityMax}return!1},storeSpecial(){if(!Object(r.d)(this.currentOffer)){if(this.isActive)return{id:1};const e=this.whenIsCurrentOffer();let t="";return e===u.past?t=this.$translate("Ceres::Template.liveShoppingOfferClosed"):e===u.future?t=this.$translate("Ceres::Template.liveShoppingNextOffer"):e===u.now&&(t=this.$translate("Ceres::Template.liveShoppingOfferSoldOut")),{id:-1,names:{name:t}}}return null},prices(){const e=this.currentOffer.item.prices,t={price:e.default,rrp:e.rrp,isRrpDefaultPrice:!1};return Object(r.d)(e.specialOffer)||(t.price=e.specialOffer,t.rrp=e.default||e.rrp,t.isRrpDefaultPrice=!!e.default),t},...Object(a.e)({liveShoppingOffers:e=>e.liveShopping.liveShoppingOffers})},created(){this.$store.dispatch("retrieveLiveShoppingOffer",{liveShoppingId:this.liveShoppingId,sorting:this.sorting})},methods:{whenIsCurrentOffer(){const e=1e3*parseInt(this.currentOffer.liveShopping.fromTime),t=1e3*parseInt(this.currentOffer.liveShopping.toTime),i=Date.now();return e<i&&i>t?u.past:e<i&&i<t?u.now:u.future},reloadOffer(){this.$store.dispatch("retrieveLiveShoppingOffer",{liveShoppingId:this.liveShoppingId,sorting:this.sorting})}}},g=Object(c.a)(v,s,[],!1,null,null,null);g.options.__file="node_modules/Ceres/resources/js/src/app/components/liveShopping/LiveShoppingItem.vue";t.default=g.exports}}]);
//# sourceMappingURL=ceres-14.min.js.map